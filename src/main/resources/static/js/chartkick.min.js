(function(y,z){"object"===typeof exports&&"undefined"!==typeof module?module.exports=z():"function"===typeof define&&define.amd?define(z):y.Chartkick=z()})(this,function(){function y(a){return"[object Array]"===Object.prototype.toString.call(a)}function z(a){return!(a instanceof Function)&&a instanceof Object}function P(a,b){for(var c in b)z(b[c])||y(b[c])?(z(b[c])&&!z(a[c])&&(a[c]={}),y(b[c])&&!y(a[c])&&(a[c]=[]),P(a[c],b[c])):void 0!==b[c]&&(a[c]=b[c])}function k(a,b){var c={};P(c,a);P(c,b);return c}
    function I(a){var b,c;if("object"!==typeof a)if("number"===typeof a)a=new Date(1E3*a);else{a=""+a;if(b=a.match(Da))return a=parseInt(b[1],10),c=parseInt(b[3],10)-1,b=parseInt(b[5],10),new Date(a,c,b);b=a.replace(/ /,"T").replace(" ","").replace("UTC","Z");var d,f,g,B,m,h;c=Object.prototype.toString.call(b);"[object Date]"!==c&&("[object String]"!==c?b=void 0:(b=b.match(Ea))?(h=parseInt(b[1],10),B=parseInt(b[3],10)-1,c=parseInt(b[5],10),d=parseInt(b[7],10),g=b[9]?parseInt(b[9],10):0,m=b[11]?parseInt(b[11],
        10):0,f=b[12]?1E3*parseFloat("."+b[12].slice(1)):0,d=Date.UTC(h,B,c,d,g,m,f),b[13]&&b[14]&&(c=60*b[15],b[17]&&(c+=parseInt(b[17],10)),c*="-"===b[14]?-1:1,d-=6E4*c),b=new Date(d)):b=void 0);a=b||new Date(a)}return a}function Q(a){if(!y(a)){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push([c,a[c]]);a=b}return a}function F(a,b,c,d,f,g,B,m){return function(h,e,n){var p=h.data,v=k({},a),v=k(v,n||{});(h.hideLegend||"legend"in e)&&b(v,e.legend,h.hideLegend);e.title&&c(v,e.title);if("min"in e)d(v,e.min);
    else{a:{var u;for(h=0;h<p.length;h++)for(u=p[h].data,n=0;n<u.length;n++)if(0>u[n][1]){p=!0;break a}p=!1}p||d(v,0)}e.max&&f(v,e.max);"stacked"in e&&g(v,e.stacked);e.colors&&(v.colors=e.colors);e.xtitle&&B(v,e.xtitle);e.ytitle&&m(v,e.ytitle);return v=k(v,e.library||{})}}function da(a,b){return a[0].getTime()-b[0].getTime()}function ea(a,b){return a[0]-b[0]}function fa(a,b){return a-b}function ga(a){return 0===a.getMilliseconds()&&0===a.getSeconds()}function ha(a){return ga(a)&&0===a.getMinutes()}function J(a){return ha(a)&&
        0===a.getHours()}function ia(a){return J(a)&&1===a.getDate()}function Fa(a){return!isNaN(I(a))&&6<=(""+a).length}function Ga(a){return"number"===typeof a}function G(a,b,c){a=a||"";c.prefix&&(0>b&&(b*=-1,a+="-"),a+=c.prefix);if(c.thousands||c.decimal){var d=(""+b).split(".");b=d[0];c.thousands&&(b=b.replace(/\B(?=(\d{3})+(?!\d))/g,c.thousands));1<d.length&&(b+=(c.decimal||".")+d[1])}return a+b+(c.suffix||"")}function Ha(a,b,c){ja.push([a,b,c]);R()}function R(){if(4>S){var a=ja.shift();a&&(S++,Ia(a[0],
        a[1],a[2]),R())}}function ka(){S--;R()}function Ia(a,b,c){Ja(a,b,function(a,b,g){c("string"===typeof g?g:g.message)})}function Ja(a,b,c){var d=window.jQuery||window.Zepto||window.$;if(d)d.ajax({dataType:"json",url:a,success:b,error:c,complete:ka});else{var f=new XMLHttpRequest;f.open("GET",a,!0);f.setRequestHeader("Content-Type","application/json");f.onload=function(){ka();200===f.status?b(JSON.parse(f.responseText),f.statusText,f):c(f,"error",f.statusText)};f.send()}}function la(a,b){b="Error Loading Chart: "+
        b;document.body.innerText?a.innerText=b:a.textContent=b;a.style.color="#ff0000"}function ma(a){try{a.__render()}catch(b){throw la(a.element,b.message),b;}}function K(a,b){"string"===typeof b?Ha(b,function(b){a.rawData=b;ma(a)},function(b){la(a.element,b)}):(a.rawData=b,ma(a))}function Ka(a){var b=a.element,c=document.createElement("a");c.download=!0===a.options.download?"chart.png":a.options.download;c.style.position="absolute";c.style.top="20px";c.style.right="20px";c.style.zIndex=1E3;c.style.lineHeight=
        "20px";c.target="_blank";var d=document.createElement("img");d.alt="Download";d.style.border="none";d.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABCFBMVEUAAADMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMywEsqxAAAAV3RSTlMAAQIDBggJCgsMDQ4PERQaHB0eISIjJCouLzE0OTo/QUJHSUpLTU5PUllhYmltcHh5foWLjI+SlaCio6atr7S1t7m6vsHHyM7R2tze5Obo7fHz9ff5+/1hlxK2AAAA30lEQVQYGUXBhVYCQQBA0TdYWAt2d3d3YWAHyur7/z9xgD16Lw0DW+XKx+1GgX+FRzM3HWQWrHl5N/oapW5RPe0PkBu+UYeICvozTWZVK23Ao04B79oJrOsJDOoxkZoQPWgX29pHpCZEk7rEvQYiNSFq1UMqvlCjJkRBS1R8hb00Vb/TajtBL7nTHE1X1vyMQF732dQhyF2o6SAwrzP06iUQzvwsArlnzcOdrgBhJyHa1QOgO9U1GsKuvjUTjavliZYQ8nNPapG6sap/3nrIdJ6bOWzmX/fy0XVpfzZP3S8OJT3g9EEiJwAAAABJRU5ErkJggg==";
        c.appendChild(d);b.style.position="relative";a.__downloadAttached=!0;a.__enterEvent=na(b,"mouseover",function(d){d=d.relatedTarget;d&&(d===this||oa(this,d))||!a.options.download||(c.href=a.toImage(),b.appendChild(c))});a.__leaveEvent=na(b,"mouseout",function(a){a=a.relatedTarget;(!a||a!==this&&!oa(this,a))&&c.parentNode&&c.parentNode.removeChild(c)})}function na(a,b,c){if(a.addEventListener)return a.addEventListener(b,c,!1),c;var d=function(){return c.call(a,window.event)};a.attachEvent("on"+b,d);
        return d}function oa(a,b){if(a===b)return!1;for(;b&&b!==a;)b=b.parentNode;return b===a}function L(a){var b;a:{if(a)if("Highcharts"===a.product){b=w;break a}else if(a.charts){b=n;break a}else if(a instanceof Function){b=p;break a}throw Error("Unknown adapter");}a=new b(a);-1===D.indexOf(a)&&D.push(a)}function pa(a,b){var c,d,f;for(c=0;c<a.length;c++)for(f=Q(a[c].data),d=0;d<f.length;d++)if(!b(f[d][0]))return!1;return!0}function E(a,b,c){var d,f=a.options,g=a.rawData;!y(g)||"object"!==typeof g[0]||
    y(g[0])?(g=[{name:f.label,data:g}],a.hideLegend=!0):a.hideLegend=!1;b?c=b:f.discrete?c="string":(b=g,c=pa(b,Ga)?"number":!c&&pa(b,Fa)?"datetime":"string");a.xtype=c;c=[];for(b=0;b<g.length;b++){f={};for(d in g[b])g[b].hasOwnProperty(d)&&(f[d]=g[b][d]);c.push(f)}g=c;for(d=0;d<g.length;d++){c=g[d];b=Q(g[d].data);var f=a.xtype,B=[],e,h;for(h=0;h<b.length;h++)if("bubble"===f)B.push([parseFloat(b[h][0]),parseFloat(b[h][1]),parseFloat(b[h][2])]);else{e=b[h][0];var k=f;e="number"===k?parseFloat(e):"datetime"===
    k?I(e):""+e;B.push([e,parseFloat(b[h][1])])}"datetime"===f?B.sort(da):"number"===f&&B.sort(ea);c.data=B}return g}function qa(a){a=Q(a.rawData);var b;for(b=0;b<a.length;b++)a[b]=[""+a[b][0],parseFloat(a[b][1])];return a}var Da=/^(\d\d\d\d)(-)?(\d\d)(-)?(\d\d)$/i,Ea=/(\d\d\d\d)(-)?(\d\d)(-)?(\d\d)(T)?(\d\d)(:)?(\d\d)?(:)?(\d\d)?([.,]\d+)?($|Z|([+-])(\d\d)(:)?(\d\d)?)/i,T={maintainAspectRatio:!1,animation:!1,tooltips:{displayColors:!1,callbacks:{}},legend:{},title:{fontSize:20,fontColor:"#333"}},ra=
        {scales:{yAxes:[{ticks:{maxTicksLimit:4},scaleLabel:{fontSize:16,fontColor:"#333"}}],xAxes:[{gridLines:{drawOnChartArea:!1},scaleLabel:{fontSize:16,fontColor:"#333"},time:{},ticks:{}}]}},sa="#3366CC #DC3912 #FF9900 #109618 #990099 #3B3EAC #0099C6 #DD4477 #66AA00 #B82E2E #316395 #994499 #22AA99 #AAAA11 #6633CC #E67300 #8B0707 #329262 #5574A6 #651067".split(" "),U=function(a,b,c){void 0!==b?(a.legend.display=!!b,b&&!0!==b&&(a.legend.position=b)):c&&(a.legend.display=!1)},V=function(a,b){a.title.display=
        !0;a.title.text=b},La=function(a,b){null!==b&&(a.scales.xAxes[0].ticks.min=parseFloat(b))},Ma=function(a,b){a.scales.xAxes[0].ticks.max=parseFloat(b)},ta=function(a,b){a.scales.xAxes[0].stacked=!!b;a.scales.yAxes[0].stacked=!!b},ua=function(a,b){a.scales.xAxes[0].scaleLabel.display=!0;a.scales.xAxes[0].scaleLabel.labelString=b},va=function(a,b){a.scales.yAxes[0].scaleLabel.display=!0;a.scales.yAxes[0].scaleLabel.labelString=b},Na=function(a,b,c){var d=Math.ceil(a.element.offsetWidth/4/b.labels.length);
        25<d?d=25:10>d&&(d=10);c.scales.xAxes[0].ticks.callback||(c.scales.xAxes[0].ticks.callback=function(a){a=""+a;return a.length>d?a.substring(0,d-2)+"...":a})},M=function(a,b,c){var d={prefix:a.options.prefix,suffix:a.options.suffix,thousands:a.options.thousands,decimal:a.options.decimal};"pie"!==c&&(a=b.scales.yAxes,"bar"===c&&(a=b.scales.xAxes),a[0].ticks.callback||(a[0].ticks.callback=function(a){return G("",a,d)}));if(!b.tooltips.callbacks.label)if("scatter"===c)b.tooltips.callbacks.label=function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 b){(b=b.datasets[a.datasetIndex].label||"")&&(b+=": ");return b+"("+a.xLabel+", "+a.yLabel+")"};else if("bubble"===c)b.tooltips.callbacks.label=function(a,b){var c=b.datasets[a.datasetIndex].label||"";c&&(c+=": ");return c+"("+a.xLabel+", "+a.yLabel+", "+b.datasets[a.datasetIndex].data[a.index].v+")"};else if("pie"===c)b.tooltips.callbacks.label=function(a,b){var c=b.labels[a.index];y(c)?(c=c.slice(),c[0]+=": "):c+=": ";return G(c,b.datasets[a.datasetIndex].data[a.index],d)};else{var f="bar"===c?
        "xLabel":"yLabel";b.tooltips.callbacks.label=function(a,b){(b=b.datasets[a.datasetIndex].label||"")&&(b+=": ");return G(b,a[f],d)}}},W=F(k(T,ra),U,V,function(a,b){null!==b&&(a.scales.yAxes[0].ticks.min=parseFloat(b))},function(a,b){a.scales.yAxes[0].ticks.max=parseFloat(b)},ta,ua,va),X=function(a,b,c){var d=[],f=[],g=a.options.colors||sa,e=!0,m=!0,h,n=!0,p=!0,y=!0,v=!0,u=a.data,q=0;if("bubble"===c)for(var w=0;w<u.length;w++)for(var r=u[w],x=0;x<r.data.length;x++)r.data[x][2]>q&&(q=r.data[x][2]);var l,
        t,z,A,r=[],w=[];if("bar"===c||"column"===c||"number"!==a.xtype&&"bubble"!==a.xtype){x=[];for(q=0;q<u.length;q++)for(t=u[q],l=0;l<t.data.length;l++)z=t.data[l],A="datetime"==a.xtype?z[0].getTime():z[0],r[A]||(r[A]=Array(u.length)),r[A][q]=parseFloat(z[1]),-1===x.indexOf(A)&&x.push(A);"datetime"!==a.xtype&&"number"!==a.xtype||x.sort(fa);for(l=0;l<u.length;l++)w.push([]);for(t=0;t<x.length;t++)for(q=x[t],"datetime"===a.xtype?(l=new Date(parseFloat(q)),e=e&&J(l),h||(h=l.getDay()),m&&(m=l,z=h,m=J(m)&&
        m.getDay()===z),n=n&&ia(l),p&&(p=l,p=ia(p)&&0===p.getMonth()),y=y&&ha(l),v=v&&ga(l)):l=q,f.push(l),l=0;l<u.length;l++)w[l].push(void 0===r[q][l]?null:r[q][l])}else for(h=0;h<u.length;h++){r=u[h];x=[];for(t=0;t<r.data.length;t++)l={x:parseFloat(r.data[t][0]),y:parseFloat(r.data[t][1])},"bubble"===c&&(l.r=20*parseFloat(r.data[t][2])/q,l.v=r.data[t][2]),x.push(l);w.push(x)}for(q=0;q<u.length;q++)t=u[q],h=t.color||g[q],"line"!==c?(r=h,r=(x=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r))?"rgba("+
        parseInt(x[1],16)+", "+parseInt(x[2],16)+", "+parseInt(x[3],16)+", 0.5)":r):r=h,h={label:t.name||"",data:w[q],fill:"area"===c,borderColor:h,backgroundColor:r,pointBackgroundColor:h,borderWidth:2,pointHoverBackgroundColor:h},t.stack&&(h.stack=t.stack),!1===a.options.curve&&(h.lineTension=0),!1===a.options.points&&(h.pointRadius=0,h.pointHitRadius=5),h=k(h,a.options.dataset||{}),h=k(h,t.library||{}),h=k(h,t.dataset||{}),d.push(h);if("datetime"===a.xtype&&0<f.length){c=f[0].getTime();g=f[0].getTime();
        for(q=1;q<f.length;q++)u=f[q].getTime(),u<c&&(c=u),u>g&&(g=u);c=(g-c)/864E5;if(!b.scales.xAxes[0].time.unit){var C;p||3650<c?(b.scales.xAxes[0].time.unit="year",C=365):n||300<c?(b.scales.xAxes[0].time.unit="month",C=30):e||10<c?(b.scales.xAxes[0].time.unit="day",C=1):y||.5<c?(b.scales.xAxes[0].time.displayFormats={hour:"MMM D, h a"},b.scales.xAxes[0].time.unit="hour",C=1/24):v&&(b.scales.xAxes[0].time.displayFormats={minute:"h:mm a"},b.scales.xAxes[0].time.unit="minute",C=1/24/60);C&&0<c&&(a=Math.ceil(c/
            C/(a.element.offsetWidth/100)),m&&1===C&&(a=7*Math.ceil(a/7)),b.scales.xAxes[0].time.unitStepSize=a)}b.scales.xAxes[0].time.tooltipFormat||(e?b.scales.xAxes[0].time.tooltipFormat="ll":y?b.scales.xAxes[0].time.tooltipFormat="MMM D, h a":v&&(b.scales.xAxes[0].time.tooltipFormat="h:mm a"))}return{labels:f,datasets:d}},p=function(a){this.name="chartjs";this.library=a};p.prototype.renderLineChart=function(a,b){var c={},d;if(d=!a.options.max)a:{d=a.data;var f,g,e;for(f=0;f<d.length;f++)for(e=d[f].data,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         g=0;g<e.length;g++)if(0!=e[g][1]){d=!1;break a}d=!0}d&&(c.max=1);c=W(a,k(c,a.options));M(a,c,b);b=X(a,c,b||"line");"number"===a.xtype?(c.scales.xAxes[0].type="linear",c.scales.xAxes[0].position="bottom"):c.scales.xAxes[0].type="string"===a.xtype?"category":"time";this.drawChart(a,"line",b,c)};p.prototype.renderPieChart=function(a){var b=k({},T);a.options.donut&&(b.cutoutPercentage=50);"legend"in a.options&&U(b,a.options.legend);a.options.title&&V(b,a.options.title);b=k(b,a.options.library||{});M(a,
        b,"pie");for(var c=[],d=[],f=0;f<a.data.length;f++){var g=a.data[f];c.push(g[0]);d.push(g[1])}d={data:d,backgroundColor:a.options.colors||sa};d=k(d,a.options.dataset||{});this.drawChart(a,"pie",{labels:c,datasets:[d]},b)};p.prototype.renderColumnChart=function(a,b){var c;c="bar"===b?F(k(T,ra),U,V,La,Ma,ta,ua,va)(a,a.options):W(a,a.options);M(a,c,b);var d=X(a,c,"column");"bar"!==b&&Na(a,d,c);this.drawChart(a,"bar"===b?"horizontalBar":"bar",d,c)};p.prototype.renderAreaChart=function(a){this.renderLineChart(a,
        "area")};p.prototype.renderBarChart=function(a){this.renderColumnChart(a,"bar")};p.prototype.renderScatterChart=function(a,b){b=b||"scatter";var c=W(a,a.options);M(a,c,b);"showLines"in c||(c.showLines=!1);var d=X(a,c,b);c.scales.xAxes[0].type="linear";c.scales.xAxes[0].position="bottom";this.drawChart(a,b,d,c)};p.prototype.renderBubbleChart=function(a){this.renderScatterChart(a,"bubble")};p.prototype.destroy=function(a){a.chart&&a.chart.destroy()};p.prototype.drawChart=function(a,b,c,d){this.destroy(a);
        b={type:b,data:c,options:d};a.options.code&&window.console.log("new Chart(ctx, "+JSON.stringify(b)+");");a.element.innerHTML="<canvas></canvas>";c=a.element.getElementsByTagName("CANVAS")[0];a.chart=new this.library(c,b)};var wa={chart:{},xAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},series:{marker:{}}}},
        xa=function(a,b,c){void 0!==b?(a.legend.enabled=!!b,b&&!0!==b&&("top"===b||"bottom"===b?a.legend.verticalAlign=b:(a.legend.layout="vertical",a.legend.verticalAlign="middle",a.legend.align=b))):c&&(a.legend.enabled=!1)},ya=function(a,b){a.title.text=b},Y=F(wa,xa,ya,function(a,b){a.yAxis.min=b},function(a,b){a.yAxis.max=b},function(a,b){a.plotOptions.series.stacking=b?!0===b?"normal":b:null},function(a,b){a.xAxis.title.text=b},function(a,b){a.yAxis.title.text=b}),Z=function(a,b,c){var d={prefix:a.options.prefix,
            suffix:a.options.suffix,thousands:a.options.thousands,decimal:a.options.decimal};"pie"===c||b.yAxis.labels.formatter||(b.yAxis.labels.formatter=function(){return G("",this.value,d)});b.tooltip.pointFormatter||(b.tooltip.pointFormatter=function(){return'<span style="color:'+this.color+">\u25cf</span> "+G(this.series.name+": <b>",this.y,d)+"</b><br/>"})},w=function(a){this.name="highcharts";this.library=a};w.prototype.renderLineChart=function(a,b){b=b||"spline";var c={};"areaspline"===b&&(c={plotOptions:{areaspline:{stacking:"normal"},
            area:{stacking:"normal"},series:{marker:{enabled:!1}}}});!1===a.options.curve&&("areaspline"===b?b="area":"spline"===b&&(b="line"));var c=Y(a,a.options,c),d,f;c.xAxis.type="string"===a.xtype?"category":"number"===a.xtype?"linear":"datetime";c.chart.type||(c.chart.type=b);Z(a,c,b);var g=a.data;for(d=0;d<g.length;d++){g[d].name=g[d].name||"Value";b=g[d].data;if("datetime"===a.xtype)for(f=0;f<b.length;f++)b[f][0]=b[f][0].getTime();g[d].marker={symbol:"circle"};!1===a.options.points&&(g[d].marker.enabled=
        !1)}this.drawChart(a,g,c)};w.prototype.renderScatterChart=function(a){var b=Y(a,a.options,{});b.chart.type="scatter";this.drawChart(a,a.data,b)};w.prototype.renderPieChart=function(a){var b=k(wa,{});a.options.colors&&(b.colors=a.options.colors);a.options.donut&&(b.plotOptions={pie:{innerSize:"50%"}});"legend"in a.options&&xa(b,a.options.legend);a.options.title&&ya(b,a.options.title);b=k(b,a.options.library||{});Z(a,b,"pie");this.drawChart(a,[{type:"pie",name:a.options.label||"Value",data:a.data}],
        b)};w.prototype.renderColumnChart=function(a,b){b=b||"column";var c=a.data,d=Y(a,a.options),f,g,e,m=[],h=[];d.chart.type=b;Z(a,d,b);for(b=0;b<c.length;b++)for(g=c[b],f=0;f<g.data.length;f++)e=g.data[f],m[e[0]]||(m[e[0]]=Array(c.length),h.push(e[0])),m[e[0]][b]=e[1];"number"===a.xtype&&h.sort(fa);d.xAxis.categories=h;g=[];for(b=0;b<c.length;b++){e=[];for(f=0;f<h.length;f++)e.push(m[h[f]][b]||0);f={name:c[b].name||"Value",data:e};c[b].stack&&(f.stack=c[b].stack);g.push(f)}this.drawChart(a,g,d)};w.prototype.renderBarChart=
        function(a){this.renderColumnChart(a,"bar")};w.prototype.renderAreaChart=function(a){this.renderLineChart(a,"areaspline")};w.prototype.destroy=function(a){a.chart&&a.chart.destroy()};w.prototype.drawChart=function(a,b,c){this.destroy(a);c.chart.renderTo=a.element.id;c.series=b;a.options.code&&window.console.log("new Highcharts.Chart("+JSON.stringify(c)+");");a.chart=new this.library.Chart(c)};var za={},N=[],H={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",
        pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}},aa=function(a,b,c){void 0!==b?a.legend.position=b?!0===b?"right":b:"none":c&&(a.legend.position="none")},ba=function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    b){a.title=b;a.titleTextStyle={color:"#333",fontSize:"20px"}},Oa=function(a,b){a.hAxis.viewWindow.min=b},Pa=function(a,b){a.hAxis.viewWindow.max=b},Aa=function(a,b){a.isStacked=b?b:!1},Ba=function(a,b){a.hAxis.title=b;a.hAxis.titleTextStyle.italic=!1},Ca=function(a,b){a.vAxis.title=b;a.vAxis.titleTextStyle.italic=!1},O=F(H,aa,ba,function(a,b){a.vAxis.viewWindow.min=b},function(a,b){a.vAxis.viewWindow.max=b},Aa,Ba,Ca),Qa=function(a){window.attachEvent?window.attachEvent("onresize",a):window.addEventListener&&
        window.addEventListener("resize",a,!0);a()},n=function(a){this.name="google";this.library=a};n.prototype.renderLineChart=function(a){var b=this;this.waitForLoaded(a,function(){var c={};!1===a.options.curve&&(c.curveType="none");!1===a.options.points&&(c.pointSize=0);var c=O(a,a.options,c),d=b.createDataTable(a.data,a.xtype);b.drawChart(a,"LineChart",d,c)})};n.prototype.renderPieChart=function(a){var b=this;this.waitForLoaded(a,function(){var c={chartArea:{top:"10%",height:"80%"},legend:{}};a.options.colors&&
    (c.colors=a.options.colors);a.options.donut&&(c.pieHole=.5);"legend"in a.options&&aa(c,a.options.legend);a.options.title&&ba(c,a.options.title);var c=k(k(H,c),a.options.library||{}),d=new b.library.visualization.DataTable;d.addColumn("string","");d.addColumn("number","Value");d.addRows(a.data);b.drawChart(a,"PieChart",d,c)})};n.prototype.renderColumnChart=function(a){var b=this;this.waitForLoaded(a,function(){var c=O(a,a.options),d=b.createDataTable(a.data,a.xtype);b.drawChart(a,"ColumnChart",d,c)})};
    n.prototype.renderBarChart=function(a){var b=this;this.waitForLoaded(a,function(){var c=F(H,aa,ba,Oa,Pa,Aa,Ba,Ca)(a,a.options,{hAxis:{gridlines:{color:"#ccc"}}}),d=b.createDataTable(a.data,a.xtype);b.drawChart(a,"BarChart",d,c)})};n.prototype.renderAreaChart=function(a){var b=this;this.waitForLoaded(a,function(){var c=O(a,a.options,{isStacked:!0,pointSize:0,areaOpacity:.5}),d=b.createDataTable(a.data,a.xtype);b.drawChart(a,"AreaChart",d,c)})};n.prototype.renderGeoChart=function(a){var b=this;this.waitForLoaded(a,
        function(){var c=k(k(H,{legend:"none",colorAxis:{colors:a.options.colors||["#f6c7b6","#ce502d"]}}),a.options.library||{}),d=new b.library.visualization.DataTable;d.addColumn("string","");d.addColumn("number",a.options.label||"Value");d.addRows(a.data);b.drawChart(a,"GeoChart",d,c)})};n.prototype.renderScatterChart=function(a){var b=this;this.waitForLoaded(a,function(){var c=O(a,a.options,{}),d=a.data,f=[],g,e,m;for(g=0;g<d.length;g++)for(d[g].name=d[g].name||"Value",m=d[g].data,e=0;e<m.length;e++){var h=
        Array(d.length+1);h[0]=m[e][0];h[g+1]=m[e][1];f.push(h)}e=new b.library.visualization.DataTable;e.addColumn("number","");for(g=0;g<d.length;g++)e.addColumn("number",d[g].name);e.addRows(f);b.drawChart(a,"ScatterChart",e,c)})};n.prototype.renderTimeline=function(a){var b=this;this.waitForLoaded(a,"timeline",function(){var c={legend:"none"};a.options.colors&&(c.colors=a.options.colors);var c=k(k(H,c),a.options.library||{}),d=new b.library.visualization.DataTable;d.addColumn({type:"string",id:"Name"});
        d.addColumn({type:"date",id:"Start"});d.addColumn({type:"date",id:"End"});d.addRows(a.data);a.element.style.lineHeight="normal";b.drawChart(a,"Timeline",d,c)})};n.prototype.destroy=function(a){a.chart&&a.chart.clearChart()};n.prototype.drawChart=function(a,b,c,d){this.destroy(a);a.options.code&&window.console.log("var data = new google.visualization.DataTable("+c.toJSON()+");\nvar chart = new google.visualization."+b+"(element);\nchart.draw(data, "+JSON.stringify(d)+");");a.chart=new this.library.visualization[b](a.element);
        Qa(function(){a.chart.draw(c,d)})};n.prototype.waitForLoaded=function(a,b,c){var d=this;c||(c=b,b="corechart");N.push({pack:b,callback:c});za[b]?this.runCallbacks():(za[b]=!0,c={packages:[b],callback:function(){d.runCallbacks()}},a=a.__config(),a.language&&(c.language=a.language),"corechart"===b&&a.mapsApiKey&&(c.mapsApiKey=a.mapsApiKey),this.library.charts.load("current",c))};n.prototype.runCallbacks=function(){for(var a,b,c=0;c<N.length;c++)if(a=N[c],b=this.library.visualization&&("corechart"===
        a.pack&&this.library.visualization.LineChart||"timeline"===a.pack&&this.library.visualization.Timeline))a.callback(),N.splice(c,1),c--};n.prototype.createDataTable=function(a,b){var c,d,f,e,k,m=[],h=[];for(c=0;c<a.length;c++)for(f=a[c],a[c].name=a[c].name||"Value",d=0;d<f.data.length;d++)e=f.data[d],k="datetime"===b?e[0].getTime():e[0],m[k]||(m[k]=Array(a.length),h.push(k)),m[k][c]=parseFloat(e[1]);f=[];e=!0;for(d=0;d<h.length;d++)c=h[d],"datetime"===b?(k=new Date(parseFloat(c)),e=e&&J(k)):k="number"===
    b?parseFloat(c):c,f.push([k].concat(m[c]));if("datetime"===b)f.sort(da);else if("number"===b){f.sort(ea);for(c=0;c<f.length;c++)f[c][0]=""+f[c][0];b="string"}d=new this.library.visualization.DataTable;d.addColumn("datetime"===b&&e?"date":b,"");for(c=0;c<a.length;c++)d.addColumn("number",a[c].name);d.addRows(f);return d};var ja=[],S=0,ca={},D=[],e=function(a,b,c){var d;if("string"===typeof a&&(d=a,a=document.getElementById(a),!a))throw Error("No element with id "+d);this.element=a;this.options=k(A.options,
        c||{});this.dataSource=b;A.charts[a.id]=this;K(this,b);this.options.refresh&&this.startRefresh()};e.prototype.getElement=function(){return this.element};e.prototype.getDataSource=function(){return this.dataSource};e.prototype.getData=function(){return this.data};e.prototype.getOptions=function(){return this.options};e.prototype.getChartObject=function(){return this.chart};e.prototype.getAdapter=function(){return this.adapter};e.prototype.updateData=function(a,b){this.dataSource=a;b&&this.__updateOptions(b);
        K(this,a)};e.prototype.setOptions=function(a){this.__updateOptions(a);this.redraw()};e.prototype.redraw=function(){K(this,this.rawData)};e.prototype.refreshData=function(){if("string"===typeof this.dataSource){var a=-1===this.dataSource.indexOf("?")?"?":"&",a=this.dataSource+a+"_="+(new Date).getTime();K(this,a)}};e.prototype.startRefresh=function(){var a=this,b=this.options.refresh;if(!this.intervalId)if(b)this.intervalId=setInterval(function(){a.refreshData()},1E3*b);else throw Error("No refresh interval");
    };e.prototype.stopRefresh=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)};e.prototype.toImage=function(){return"chartjs"===this.adapter?this.chart.toBase64Image():null};e.prototype.destroy=function(){this.__adapterObject&&this.__adapterObject.destroy(this);if(this.__enterEvent){var a=this.element,b=this.__enterEvent;a.removeEventListener?a.removeEventListener("mouseover",b,!1):a.detachEvent("onmouseover",b)}this.__leaveEvent&&(a=this.element,b=this.__leaveEvent,
        a.removeEventListener?a.removeEventListener("mouseout",b,!1):a.detachEvent("onmouseout",b))};e.prototype.__updateOptions=function(a){var b=a.refresh&&a.refresh!==this.options.refresh;this.options=k(A.options,a);b&&(this.stopRefresh(),this.startRefresh())};e.prototype.__render=function(){this.data=this.__processData();var a=this.__chartName(),b;if(b=this.options.messages&&this.options.messages.empty)a:if(b=this.data,"PieChart"===a||"GeoChart"===a||"Timeline"===a)b=0===b.length;else{for(var c=0;c<b.length;c++)if(0<
        b[c].data.length){b=!1;break a}b=!0}if(b)a=this.element,b=this.options.messages.empty,document.body.innerText?a.innerText=b:a.textContent=b;else{a:{var d,e;d="render"+a;e=this.options.adapter;"Chart"in window&&L(window.Chart);"Highcharts"in window&&L(window.Highcharts);window.google&&window.google.charts&&L(window.google);for(b=0;b<D.length;b++)if(c=D[b],(!e||e===c.name)&&c[d]instanceof Function){this.adapter=c.name;this.__adapterObject=c;c[d](this);break a}if(0<D.length)throw Error("No charting library found for "+
        a);throw Error("No charting libraries found - be sure to include one before your charts");}this.options.download&&!this.__downloadAttached&&"chartjs"===this.adapter&&Ka(this)}};e.prototype.__config=function(){return ca};var Ra=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.__processData=function(){return E(this)};b.prototype.__chartName=function(){return"LineChart"};return b}(e),Sa=function(a){function b(){a.apply(this,
        arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.__processData=function(){return qa(this)};b.prototype.__chartName=function(){return"PieChart"};return b}(e),Ta=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.__processData=function(){return E(this,null,!0)};b.prototype.__chartName=function(){return"ColumnChart"};return b}(e),Ua=function(a){function b(){a.apply(this,
        arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.__processData=function(){return E(this,null,!0)};b.prototype.__chartName=function(){return"BarChart"};return b}(e),Va=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.__processData=function(){return E(this)};b.prototype.__chartName=function(){return"AreaChart"};return b}(e),Wa=function(a){function b(){a.apply(this,
        arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.__processData=function(){return qa(this)};b.prototype.__chartName=function(){return"GeoChart"};return b}(e),Xa=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.__processData=function(){return E(this,"number")};b.prototype.__chartName=function(){return"ScatterChart"};return b}(e),Ya=function(a){function b(){a.apply(this,
        arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.__processData=function(){return E(this,"bubble")};b.prototype.__chartName=function(){return"BubbleChart"};return b}(e),e=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.__processData=function(){var a,b=this.rawData;for(a=0;a<b.length;a++)b[a][1]=I(b[a][1]),b[a][2]=I(b[a][2]);return b};b.prototype.__chartName=
        function(){return"Timeline"};return b}(e),A={LineChart:Ra,PieChart:Sa,ColumnChart:Ta,BarChart:Ua,AreaChart:Va,GeoChart:Wa,ScatterChart:Xa,BubbleChart:Ya,Timeline:e,charts:{},configure:function(a){for(var b in a)a.hasOwnProperty(b)&&(ca[b]=a[b])},eachChart:function(a){for(var b in A.charts)A.charts.hasOwnProperty(b)&&a(A.charts[b])},config:ca,options:{},adapters:D,addAdapter:L};return A});